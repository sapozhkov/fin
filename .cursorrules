- Всегда отвечай на русском языке.
- Придерживайся стиля кода PEP 8 для Python. Используй автоформаттеры, такие как Black, если они настроены в проекте.
- Генерируй осмысленные имена переменных, функций и классов на английском языке.
- Пиши комментарии только для сложного или неочевидного кода. Не комментируй очевидные вещи.
- Для коммитов используй формат #<номер задачи> <краткое описание>. Номер задачи можно взять из названия ветки. если нет вставь #NNN, оператор сам заполнит
- Предлагая новый код, старайся включать и написание соответствующих юнит-тестов (например, с использованием pytest).
- При работе с зависимостями, обновляй `requirements.txt` и указывай конкретные версии.
- Напоминай о необходимости хранить секреты (API-ключи, пароли) вне репозитория, например, в переменных окружения (`.env`) или системах управления секретами.
- Обращай внимание на обработку ошибок и граничные случаи.
- Отдавай предпочтение стандартным библиотекам Python и устоявшимся практикам сообщества.
- При генерации кода для Flask используй Blueprints для организации роутов.
- При работе с SQLAlchemy используй модели ORM и сессии. Для изменений схемы БД предлагай создание миграций Alembic.

- Основной язык проекта: Python.
- Основной фреймворк: Flask.
- ORM: SQLAlchemy. Миграции управляются с помощью Alembic.
- Ключевые зависимости: Flask, Flask-SQLAlchemy, Flask-Login, Flask-Admin, Alembic, python-dotenv, tinkoff-investments, msgspec. Полный список см. в `requirements.txt`.
- Структура проекта:
    - Основной код приложения находится в директории `app/`.
    - Веб-компоненты (роуты, представления Flask) могут быть в `app/web/` или `web/`. Используются Flask Blueprints.
    - Модели SQLAlchemy располагаются в `app/db/models/` или подобной директории.
    - Код для взаимодействия с Tinkoff API инкапсулирован (вероятно, в `lib/` или `app/lib/`).
    - Есть фоновые задачи (`task_worker.py`) и боты (`bot.py`, `acc_bot.py`).
    - Используются DTO (директория `dto/`, библиотека `msgspec`).
    - Тесты находятся в директории `tests/` и используют pytest.
    - Миграции Alembic находятся в директории `migrations/`.
- Конфигурация: Используется `.env` для переменных окружения (включая секреты Tinkoff API). Веб-сервер запускается через Gunicorn (см. `gunicorn_config.py`). Скрипт `starter.py` используется для запуска компонентов.
- База данных: Изменения схемы производятся строго через миграции Alembic.
- Внешние сервисы: Проект интегрирован с Tinkoff Investments API. Учитывай необходимость обработки ошибок API и хранения токенов в `.env`.
- Предпочтения:
    - Использовать Flask-Login для аутентификации.
    - Использовать Flask-Admin для админ-панели.
    - Использовать Flask-WTF для форм.